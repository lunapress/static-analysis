#!/usr/bin/env php
<?php
declare(strict_types=1);

/** @psalm-suppress UnresolvableInclude */
include $_composer_autoload_path ?? __DIR__ . '/../vendor/autoload.php';

use LunaPress\WpStaticAnalysis\Cli\PHPCS\PhpcbfCommand;
use LunaPress\WpStaticAnalysis\Cli\PHPCS\PhpcsCommand;
use LunaPress\WpStaticAnalysis\Cli\Psalm\PsalmCommand;
use Symfony\Component\Console\Application;

$app = new Application('LunaPress WP Static Analysis', '1.0.0');
try {
    $app->add(new PhpcsCommand());
    $app->add(new PhpcbfCommand());
    $app->add(new PsalmCommand());
    $app->run();
} catch (Throwable $e) {
    fwrite(STDERR, 'Unexpected error: ' . $e->getMessage() . PHP_EOL);
    exit(1);
}
